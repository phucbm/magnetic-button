/*!
 * @phucbm/magnetic-button 1.1.0
 * https://phucbm.github.io/magnetic-button/
 *
 * @license MIT
 * @author: phucbm, https://github.com/phucbm
 */
import m from"@phucbm/lerp";var s=class s{constructor(t,e={}){this.settings={activeClass:"magnetizing",attraction:.3,distance:50,speed:.1,disableOnTouch:!0,maxX:void 0,maxY:void 0,onEnter:()=>{},onExit:()=>{},onUpdate:()=>{}};this.isEnter=!1;this.lerpPos={x:0,y:0};this.target=null;this.boundMagnetize=null;if(!t){document.querySelectorAll("[data-magnetic]").forEach(d=>{s.initializedElements.has(d)||new s(d,e)});return}if(s.initializedElements.has(t))return;s.initializedElements.add(t);let i=parseFloat(t.getAttribute("data-distance")||""),n=parseFloat(t.getAttribute("data-attraction")||""),a=parseFloat(t.getAttribute("data-speed")||""),o=parseFloat(t.getAttribute("data-max-x")||""),l=parseFloat(t.getAttribute("data-max-y")||"");if(this.settings={...this.settings,attraction:isNaN(n)?e.attraction??this.settings.attraction:n,distance:isNaN(i)?e.distance??this.settings.distance:i,speed:isNaN(a)?e.speed??this.settings.speed:a,maxX:isNaN(o)?e.maxX??this.settings.maxX:o,maxY:isNaN(l)?e.maxY??this.settings.maxY:l,...e},this.settings.disableOnTouch&&s.isTouchDevice()){s.initializedElements.delete(t);return}this.target=t,this.boundMagnetize=d=>this.magnetize(t,d),window.addEventListener("mousemove",this.boundMagnetize),t.classList.add("is-magnetized")}static isTouchDevice(){return window.matchMedia("(hover: none) and (pointer: coarse)").matches}magnetize(t,e){let i=this.calculateCoordinates(t,e.clientX,e.clientY);i.distance<this.settings.distance?(this.animateButton(t,i.deltaX,i.deltaY),this.isEnter||(this.isEnter=!0,t.classList.add(this.settings.activeClass),this.settings.onEnter(i)),this.settings.onUpdate(i)):(this.animateButton(t,0,0),this.isEnter&&(this.isEnter=!1,t.classList.remove(this.settings.activeClass),this.settings.onExit(i)))}animateButton(t,e,i){this.lerpPos.x=m(this.lerpPos.x,e,this.settings.speed),this.lerpPos.y=m(this.lerpPos.y,i,this.settings.speed);let n=this.lerpPos.x,a=this.lerpPos.y;this.settings.maxX!==void 0&&(n=Math.max(-this.settings.maxX,Math.min(this.settings.maxX,n))),this.settings.maxY!==void 0&&(a=Math.max(-this.settings.maxY,Math.min(this.settings.maxY,a))),t.style.transform=`translate(${n}px, ${a}px)`}calculateCoordinates(t,e,i){let n=t.getBoundingClientRect(),a=n.left+t.offsetWidth/2,o=n.top+t.offsetHeight/2,l=(e-a)*this.settings.attraction,d=(i-o)*this.settings.attraction,h=Math.max(0,Math.abs(e-a)-t.offsetWidth/2),c=Math.max(0,Math.abs(i-o)-t.offsetHeight/2),u=Math.sqrt(h*h+c*c);return{deltaX:l,deltaY:d,distance:u}}getMagnetizedArea(){return this.target?{width:this.target.offsetWidth+this.settings.distance*2,height:this.target.offsetHeight+this.settings.distance*2}:{width:0,height:0}}destroy(){this.boundMagnetize&&(window.removeEventListener("mousemove",this.boundMagnetize),this.boundMagnetize=null),this.target&&(this.target.classList.remove("is-magnetized",this.settings.activeClass),this.target.style.transform="",s.initializedElements.delete(this.target),this.target=null),this.isEnter=!1,this.lerpPos={x:0,y:0}}};s.initializedElements=new WeakSet;var r=s;typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new r):new r);var f=r;export{r as MagneticButton,f as default};
//# sourceMappingURL=index.min.js.map